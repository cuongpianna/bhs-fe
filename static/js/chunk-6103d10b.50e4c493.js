(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6103d10b"],{"84e9":function(t,e,i){},"894e":function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{ref:"pageContainer",staticClass:"page-container vs-con-loading__container"},[r("sticky",{attrs:{"z-index":10}},[r("div",{staticClass:"page-header"},[r("div",{staticClass:"left"},[r("div",{staticClass:"meta-title"},[t._v(t._s(t.generateTitleView("listPoint","point")))])]),r("div",{staticClass:"right"},[r("el-select",{attrs:{clearable:!0,placeholder:"Trạng thái xử lý"},model:{value:t.listQuery.status,callback:function(e){t.$set(t.listQuery,"status",e)},expression:"listQuery.status"}},t._l(t.options,(function(t){return r("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),r("button",{staticClass:"btn-search",on:{click:t.getListOrder}},[r("font-awesome-icon",{attrs:{color:"#2D9CDB",icon:"filter"}})],1)],1)])]),r("div",{staticClass:"page-content"},[0===t.totalOrder?r("div",{staticClass:"no-data"},[t._v(" "+t._s(t.generateTitleView("empty","common"))+" ")]):r("vs-table",{scopedSlots:t._u([{key:"thead",fn:function(){return[r("vs-tr",[r("vs-th",{staticStyle:{width:"150px"}},[r("div",{staticClass:"title-list "},[t._v(" Avatar")])]),r("vs-th",{staticClass:"title",staticStyle:{width:"auto"}},[r("div",{staticClass:"title-list "},[t._v(" "+t._s(t.generateTitleView("user","point")))])]),r("vs-th",{staticStyle:{width:"180px"}},[r("div",{staticClass:"title-list"},[t._v(" "+t._s(t.generateTitleView("point","point")))])]),r("vs-th",{staticStyle:{width:"180px"}},[r("div",{staticClass:"title-list"},[t._v(" "+t._s(t.generateTitleView("money","point")))])]),r("vs-th",{staticStyle:{width:"auto"}},[r("div",{staticClass:"title-list"},[t._v(" "+t._s(t.generateTitleView("description","point")))])]),r("vs-th",{staticStyle:{width:"180px"}},[r("div",{staticClass:"title-list"},[t._v(t._s(t.generateTitleView("created","point")))])]),r("vs-th",{staticStyle:{width:"186px"}},[r("div",{staticClass:"title-list"},[t._v(t._s(t.generateTitleView("status","point")))])]),r("vs-th",{staticStyle:{width:"160px"}},[t._v(" Actions ")])],1)]},proxy:!0},{key:"tbody",fn:function(){return t._l(t.listOrder,(function(e,s){return r("vs-tr",{key:s,attrs:{data:e}},[r("vs-td",[r("div",{staticClass:"thumbnail-item"},[""===e.user.pictureUrl&&null===e.user.pictureUrl?r("img",{attrs:{src:i("afa5")}}):r("img",{attrs:{src:t.avatarFolder+e.user.pictureUrl}})])]),r("vs-td",[t._v(" "+t._s(e.user.email)+" ")]),r("vs-td",{attrs:{align:"center"}},[t._v(" "+t._s(e.point)+" ")]),r("vs-td",{attrs:{align:"center"}},[t._v(" "+t._s(t._f("formatMoney")(e.money))+" ")]),r("vs-td",{attrs:{align:"center"}},[t._v(" "+t._s(e.description)+" ")]),r("vs-td",{attrs:{align:"center"}},[r("span",{staticClass:"date-public-item"},[t._v(t._s(t._f("fullDatetime")(e.created)))])]),r("vs-td",{attrs:{align:"center"}},[0===e.status?r("span",[t._v("Chưa xử lý")]):t._e(),1===e.status?r("span",[t._v("Đã nạp tiền")]):t._e(),2===e.status?r("span",[t._v("Đã hủy bỏ")]):t._e()]),r("vs-td",{attrs:{align:"center"}},[r("el-dropdown",{attrs:{disabled:0!==e.status}},[r("button",{staticClass:"btn-dropdown"},[r("font-awesome-icon",{attrs:{icon:"ellipsis-h"}})],1),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[r("el-dropdown-item",[r("div",{on:{click:function(i){return t.confirmOrder(e)}}},[t._v("Nạp điểm")])]),r("el-dropdown-item",[r("div",{on:{click:function(i){return t.rejectOrder(e)}}},[t._v("Hủy nạp điểm")])])],1)],1)],1)],1)}))},proxy:!0}])}),t.totalOrder>0?r("BHSPagination",{attrs:{background:"",total:t.totalOrder,page:t.listQuery.page,limit:t.listQuery.limit,"page-sizes":[10,20,30,40],position:"right"},on:{"update:page":function(e){return t.$set(t.listQuery,"page",e)},"update:limit":function(e){return t.$set(t.listQuery,"limit",e)},pagination:t.getListOrder}}):t._e(),r("vs-dialog",{staticClass:"dialog-folder",attrs:{width:"450px"},scopedSlots:t._u([{key:"header",fn:function(){return[r("h4",{staticClass:"not-margin"},[t._v(" Nạp điểm ")])]},proxy:!0}]),model:{value:t.dialogOrder,callback:function(e){t.dialogOrder=e},expression:"dialogOrder"}},[t.selectedOrder?r("div",{staticClass:"folder-wrap"},[t._v(" Nếu đồng ý, bạn sẽ tăng "+t._s(t.selectedOrder.point)+" điểm vào tài khoản "),r("b",[t._v(t._s(t.selectedOrder.user.email)+".")]),t._v(" Bạn có chắc chắn không? ")]):t._e(),r("div",{staticClass:"con-footer"},[r("vs-button",{attrs:{type:"submit"},on:{click:t.handleConfirmOrder}},[t._v(" "+t._s(t.generateTitleView("confirm","common"))+" ")]),r("vs-button",{attrs:{type:"reset",dark:"",transparent:""},on:{click:function(e){t.dialogOrder=!1}}},[t._v(" "+t._s(t.generateTitleView("cancel","common"))+" ")])],1)]),r("vs-dialog",{staticClass:"dialog-folder",attrs:{width:"450px"},scopedSlots:t._u([{key:"header",fn:function(){return[r("h4",{staticClass:"not-margin"},[t._v(" Hủy nạp điểm ")])]},proxy:!0}]),model:{value:t.dialogReject,callback:function(e){t.dialogReject=e},expression:"dialogReject"}},[t.selectedOrder?r("div",{staticClass:"folder-wrap"},[t._v(" Nếu đồng ý, bạn hủy nạp "+t._s(t.selectedOrder.point)+" điểm từ tài khoản "),r("b",[t._v(t._s(t.selectedOrder.user.email)+".")]),t._v(" Bạn có chắc chắn không? ")]):t._e(),r("div",{staticClass:"con-footer"},[r("vs-button",{attrs:{type:"submit"},on:{click:t.onRejectPointOrder}},[t._v(" "+t._s(t.generateTitleView("confirm","common"))+" ")]),r("vs-button",{attrs:{type:"reset",dark:"",transparent:""},on:{click:function(e){t.dialogReject=!1}}},[t._v(" "+t._s(t.generateTitleView("cancel","common"))+" ")])],1)])],1)],1)},s=[],n=(i("96cf"),i("1da1")),a=i("5530"),o=i("2f62"),l=i("79fa"),c=i("b42a"),d=i("b35e"),u=i("b804"),p={name:"OrderIndex",components:{Sticky:u["a"],BHSPagination:c["a"]},mixins:[d["a"]],data:function(){return{selectedOrder:null,listQuery:{page:1,limit:10,status:null},dialogOrder:!1,dialogReject:!1,itemSelect:{},searchQuery:"",options:[{label:"Chưa xử lý",value:0},{label:"Đã nạp điểm",value:1},{label:"Đã từ chối",value:2}]}},computed:Object(a["a"])({},Object(o["c"])({listOrder:"point/listOrder",totalOrder:"point/totalOrder"})),mounted:function(){this.getListOrder()},methods:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(o["b"])({actGetListOrder:"point/getOrderPaging"})),Object(o["b"])("point",["actConfirmOrder","actRejectOrder"])),{},{getListOrder:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t.$vs.loading({type:"scale",target:t.$refs.pageContainer}),e.next=3,t.actGetListOrder({current_page:t.listQuery.page,limit:t.listQuery.limit,status:t.listQuery.status});case 3:i.close();case 4:case"end":return e.stop()}}),e)})))()},confirmOrder:function(t){0===t.status?(this.selectedOrder=t,this.dialogOrder=!0):this.openNotification("top-right","warning","<i class='bx bxs-error' ></i>","<span style='color: #fff'>Thông báo</span>","Hành động không thể áp dụng với Order đã được xử lý!")},rejectOrder:function(t){0===t.status?(this.selectedOrder=t,this.dialogReject=!0):this.openNotification("top-right","warning","<i class='bx bxs-error' ></i>","<span style='color: #fff'>Thông báo</span>","Hành động không thể áp dụng với Order đã được xử lý!")},handleConfirmOrder:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.actConfirmOrder(t.selectedOrder);case 2:i=e.sent,i.isSuccess?(t.dialogOrder=!1,t.getListOrder(),t.handleShowNotification(i)):(t.dialogOrder=!1,t.handleShowNotification(i));case 4:case"end":return e.stop()}}),e)})))()},openNotification:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;this.$vs.notification({icon:i,color:e,position:t,title:r,text:s})},onRejectPointOrder:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.actRejectOrder(t.selectedOrder);case 2:i=e.sent,i.isSuccess?(t.dialogReject=!1,t.getListOrder()):t.dialogReject=!1,t.handleShowNotification(i);case 5:case"end":return e.stop()}}),e)})))()},generateTitleView:l["a"]})},v=p,g=(i("e05f"),i("2877")),h=Object(g["a"])(v,r,s,!1,null,"cae35150",null);e["default"]=h.exports},e05f:function(t,e,i){"use strict";var r=i("84e9"),s=i.n(r);s.a}}]);