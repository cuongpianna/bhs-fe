(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3f42b4c9"],{"5e0b":function(e,t,a){"use strict";var i=a("fef4"),s=a.n(i);s.a},"6d90":function(e,t,a){},7932:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrap"},[a("ValidationObserver",{scopedSlots:e._u([{key:"default",fn:function(t){var i=t.handleSubmit;t.reset;return[a("form",{on:{submit:function(t){return t.preventDefault(),i(e.handleSubmitServices)}}},[a("sticky",{attrs:{"z-index":10}},[a("div",{staticClass:"page-header"},[a("div",{staticClass:"left"},[a("div",{staticClass:"meta-title"},[a("span",[e._v(e._s(e.generateTitleView("createTitle","service")))])])]),a("div",{staticClass:"right"},[a("vs-checkbox",{model:{value:e.service.isPublic,callback:function(t){e.$set(e.service,"isPublic",t)},expression:"service.isPublic"}},[e._v(e._s(e.generateTitleView("public","common")))]),a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[e._v(e._s(e.generateTitleView("save","common")))]),a("button",{staticClass:"btn btn-danger",attrs:{type:"reset"},on:{click:e.redirectService}},[e._v(e._s(e.generateTitleView("cancel","common")))])],1)])]),a("div",{staticClass:"content"},[a("div",{staticClass:"left bhs-card"},[a("div",{staticClass:"row-wrap"},[a("div",{staticClass:"row-title"},[e._v(e._s(e.generateTitleView("Icon","service")))]),a("div",{staticClass:"row-desc desc-create"},[e._v(e._s(e.generateTitleView("iconAbout","service")))]),a("b-h-s-avatar",{attrs:{image:e.service.icon},model:{value:e.service.icon,callback:function(t){e.$set(e.service,"icon",t)},expression:"service.icon"}})],1),a("div",{staticClass:"row-wrap"},[a("div",{staticClass:"row-title required-text"},[e._v("Mô tả ngắn")]),a("ValidationProvider",{attrs:{rules:"required",name:"Mô tả ngắn"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.errors;return[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.service.description,expression:"service.description"}],staticClass:"form-control",domProps:{value:e.service.description},on:{input:function(t){t.target.composing||e.$set(e.service,"description",t.target.value)}}}),e._v(" "),a("span",{staticClass:"vee-errors"},[e._v(e._s(i[0]))])]}}],null,!0)})],1),a("div",{staticClass:"row-wrap"},[a("div",{staticClass:"row-title required-text"},[e._v(e._s(e.generateTitleView("details","news")))]),a("ValidationProvider",{attrs:{rules:"required",name:e.generateTitleView("details","news")},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.errors;return[a("Tinymce",{ref:"editor",attrs:{height:470},model:{value:e.service.content,callback:function(t){e.$set(e.service,"content",t)},expression:"service.content"}}),a("span",{staticClass:"vee-errors"},[e._v(e._s(i[0]))])]}}],null,!0)})],1)]),a("div",{staticClass:"info-right"},[a("div",{staticClass:"bhs-card"},[a("h4",{staticClass:"heading-create"},[e._v(" "+e._s(e.generateTitleView("serviceInfo","service"))+" ")]),a("div",{staticClass:"row-wrap"},[a("div",{staticClass:"row-title required-text"},[e._v(" "+e._s(e.generateTitleView("serviceTitle","service"))+" ")]),a("ValidationProvider",{attrs:{rules:"required",name:e.generateTitleView("serviceTitle","service")},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:e.service.title,expression:"service.title"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.service.title},on:{input:function(t){t.target.composing||e.$set(e.service,"title",t.target.value)}}}),a("span",{staticClass:"vee-errors"},[e._v(e._s(i[0]))])]}}],null,!0)})],1),a("div",{staticClass:"row-wrap"},[a("div",{staticClass:"row-title required-text"},[e._v(" "+e._s(e.generateTitleView("package","service"))+" ")]),a("div",{staticClass:"package-wrap"},e._l(e.packages,(function(t,i){return a("div",{key:i,staticClass:"package-row"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.package_id,expression:"package_id"}],staticClass:"p-checkbox",attrs:{type:"checkbox"},domProps:{value:t.id,checked:Array.isArray(e.package_id)?e._i(e.package_id,t.id)>-1:e.package_id},on:{click:function(a){return e.check_one(t)},change:function(a){var i=e.package_id,s=a.target,r=!!s.checked;if(Array.isArray(i)){var c=t.id,n=e._i(i,c);s.checked?n<0&&(e.package_id=i.concat([c])):n>-1&&(e.package_id=i.slice(0,n).concat(i.slice(n+1)))}else e.package_id=r}}}),e._v(" "),a("span",{staticClass:"package-name"},[e._v(e._s(t.name))]),a("ValidationProvider",{attrs:{rules:"required",name:e.generateTitleView("package","service")},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:e.package_id,expression:"package_id"}],staticStyle:{display:"none"},attrs:{type:"text"},domProps:{value:e.package_id},on:{input:function(t){t.target.composing||(e.package_id=t.target.value)}}}),a("span",{staticClass:"vee-errors"},[e._v(e._s(i[0]))])]}}],null,!0)})],1)})),0)]),a("div",{staticClass:"row-wrap"},[a("div",{staticClass:"row-title required-text"},[e._v(" "+e._s(e.generateTitleView("price","service"))+" ")]),a("ValidationProvider",{attrs:{rules:"required|positive",name:e.generateTitleView("price","service")},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:e.service.price,expression:"service.price"}],staticClass:"form-control",attrs:{type:"number"},domProps:{value:e.service.price},on:{input:function(t){t.target.composing||e.$set(e.service,"price",t.target.value)}}}),a("span",{staticClass:"vee-errors"},[e._v(e._s(i[0]))])]}}],null,!0)})],1),a("div",{staticClass:"row-wrap"},[a("div",{staticClass:"row-title required-text"},[e._v(" Giá Quy ra điểm ")]),a("ValidationProvider",{attrs:{rules:"required|positive",name:"points"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:e.service.points,expression:"service.points"}],staticClass:"form-control",attrs:{type:"number"},domProps:{value:e.service.points},on:{input:function(t){t.target.composing||e.$set(e.service,"points",t.target.value)}}}),a("span",{staticClass:"vee-errors"},[e._v(e._s(i[0]))])]}}],null,!0)})],1),a("div",{staticClass:"row-wrap"},[a("div",{staticClass:"row-title"},[e._v(" "+e._s(e.generateTitleView("priceDiscount","service"))+" ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.service.discountPrice,expression:"service.discountPrice"}],staticClass:"form-control",attrs:{type:"number"},domProps:{value:e.service.discountPrice},on:{input:function(t){t.target.composing||e.$set(e.service,"discountPrice",t.target.value)}}})])]),a("packages-table",{staticClass:"bhs-card package"})],1)])],1)]}}])})],1)},s=[],r=(a("96cf"),a("1da1")),c=a("5530"),n=a("2f62"),o=a("b804"),l=a("79fa"),v=a("b35e"),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"packages-table"},[a("div",{staticClass:"header"},[a("div",{staticClass:"title"},[e._v(e._s(e.generateTitleView("servicePackage","service")))]),a("div",{staticClass:"btn btn-primary",on:{click:function(t){e.dialogPackage=!0}}},[e._v(e._s(e.generateTitleView("addNew","common")))])]),e.packages.length>0?a("div",{staticClass:"body"},[a("vs-table",{staticClass:"bhs-table",scopedSlots:e._u([{key:"thead",fn:function(){return[a("vs-tr",[a("vs-th",[e._v(" "+e._s(e.generateTitleView("serviceName","service"))+" ")]),a("vs-th",[e._v(" "+e._s(e.generateTitleView("serviceCount","service"))+" ")]),a("vs-th")],1)]},proxy:!0},{key:"tbody",fn:function(){return e._l(e.packages,(function(t,i){return a("vs-tr",{key:i,attrs:{data:t}},[a("vs-td",{staticClass:"td-title "},[a("a-tooltip",{attrs:{placement:"top",arrowPointAtCenter:""}},[e._v(" "+e._s(e.truncate(t.name,6))+" "),a("template",{slot:"title"},[e._v(" "+e._s(t.name)+" ")])],2)],1),a("vs-td",{staticClass:"center"},[e._v(" "+e._s(t.serviceCount)+" ")]),a("vs-td",[a("div",{staticClass:"action-button"},[a("div",{staticClass:"btn btn-primary btn-edit__item",on:{click:function(a){return e.showUpdatePackage(t)}}},[a("font-awesome-icon",{staticClass:"icon",attrs:{icon:"pen"}}),a("span",[e._v(e._s(e.generateTitleView("edit","common")))])],1),a("div",{staticClass:"btn btn-danger btn-remove__item",on:{click:function(a){return e.showDeleteService(t)}}},[a("font-awesome-icon",{staticClass:"icon",attrs:{icon:"trash"}}),a("span",[e._v(e._s(e.generateTitleView("delete","common")))])],1)])])],1)}))},proxy:!0}],null,!1,2014194895)})],1):a("div",{staticClass:"empty"},[e._v(" "+e._s(e.generateTitleView("emptyPackage","service"))+" ")]),a("vs-dialog",{staticClass:"dialogPackage dialog",attrs:{width:"350px",center:""},scopedSlots:e._u([{key:"header",fn:function(){return[a("h4",{staticClass:"not-margin title-dialog"},[e._v(" "+e._s(e.generateTitleView("infoService","service"))+" ")])]},proxy:!0}]),model:{value:e.dialogPackage,callback:function(t){e.dialogPackage=t},expression:"dialogPackage"}},[a("ValidationObserver",{scopedSlots:e._u([{key:"default",fn:function(t){var i=t.handleSubmit,s=t.reset;return[a("form",{on:{submit:function(t){return t.preventDefault(),i(e.handleSubmitPackage)},reset:function(e){return e.preventDefault(),s(e)}}},[a("div",{staticClass:"folder-wrap"},[a("ValidationProvider",{attrs:{rules:"required",name:"Tóm tắt"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.errors;return[a("vs-input",{staticClass:"full-width",attrs:{border:"",placeholder:e.generateTitleView("packageName","service")},scopedSlots:e._u([{key:"icon",fn:function(){return[a("i",{staticClass:"bx bx-copy-alt"})]},proxy:!0}],null,!0),model:{value:e.package.name,callback:function(t){e.$set(e.package,"name",t)},expression:"package.name"}}),a("span",{staticClass:"vee-errors"},[e._v(e._s(i[0]))])]}}],null,!0)})],1),a("div",{staticClass:"con-footer"},[a("vs-button",{attrs:{type:"submit"}},[e._v(" "+e._s(e.generateTitleView("confirm","common"))+" ")]),a("vs-button",{attrs:{type:"reset",dark:"",transparent:""},on:{click:function(t){e.dialogPackage=!1}}},[e._v(" "+e._s(e.generateTitleView("cancel","common"))+" ")])],1)])]}}])})],1),a("vs-dialog",{staticClass:"dialogDelete",attrs:{width:"350px",center:""},scopedSlots:e._u([{key:"header",fn:function(){return[a("h4",{staticClass:"not-margin title-dialog"},[e._v(" "+e._s(e.generateTitleView("infoDialog","common"))+" ")])]},proxy:!0},{key:"footer",fn:function(){return[a("div",{staticClass:"con-footer"},[a("vs-button",{on:{click:e.confirmDeletePackage}},[e._v(" "+e._s(e.generateTitleView("confirm","common"))+" ")]),a("vs-button",{attrs:{dark:"",transparent:""},on:{click:function(t){e.dialogDelete=!1}}},[e._v(" "+e._s(e.generateTitleView("cancel","common"))+" ")])],1)]},proxy:!0}]),model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}},[a("div",{staticClass:"con-content"},[a("p",[e._v(" "+e._s(e.generateTitleView("confirmDelete","common"))),null!=e.selectedItem?a("span",{staticClass:"title-select"},[e._v('"'+e._s(e.truncate(e.selectedItem.name,10))+'" ')]):e._e(),e._v(" ? ")])])])],1)},u=[],p={name:"PackagesTable",mixins:[v["a"]],data:function(){return{dialogPackage:!1,package:{name:"",isDelete:!1,count:0},dialogDelete:!1,selectedItem:null}},computed:Object(c["a"])({},Object(n["c"])({packages:"services/packages"})),methods:Object(c["a"])(Object(c["a"])({},Object(n["b"])({actCreatePackage:"services/createPackages",actDeletePackage:"services/deletePackages",actUpdatePackage:"services/updatePackages",actGetAllPackages:"services/getAllPackages"})),{},{generateTitleView:l["a"],handleSubmitPackage:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(null!=e.selectedItem){t.next=7;break}return t.next=3,e.actCreatePackage(e.package);case 3:a=t.sent,e.handleShowNotification(a),t.next=12;break;case 7:return t.next=9,e.actUpdatePackage(e.package);case 9:i=t.sent,e.handleShowNotification(i),e.selectedItem=null;case 12:e.package={name:"",isDelete:!1,count:0},e.actGetAllPackages(),e.dialogPackage=!1;case 15:case"end":return t.stop()}}),t)})))()},showDeleteService:function(e){this.dialogDelete=!0,this.selectedItem=e},showUpdatePackage:function(e){this.selectedItem=e,this.dialogPackage=!0,this.package=JSON.parse(JSON.stringify(e))},confirmDeletePackage:function(){this.actDeletePackage(this.selectedItem),this.dialogDelete=!1,this.selectedItem=null}})},g=p,m=(a("5e0b"),a("2877")),f=Object(m["a"])(g,d,u,!1,null,"5751ef16",null),k=f.exports,_=a("8256"),w=a("a896"),b={name:"ServiceCreate",components:{BHSAvatar:w["a"],Sticky:o["a"],PackagesTable:k,Tinymce:_["a"]},mixins:[v["a"]],data:function(){return{dialogPackage:!1,package_id:[],serivce_id:null,service:{content:"",points:0,discountPrice:null,price:null,description:"",isDeleted:!1,title:"",icon:"",isPublic:!0,serviceTypeId:null}}},computed:Object(c["a"])({},Object(n["c"])({packages:"services/packages"})),mounted:function(){void 0!==this.$route.params.id&&(this.serivce_id=this.$route.params.id,this.getServiceInfo()),this.getAllPackages()},methods:Object(c["a"])(Object(c["a"])({},Object(n["b"])({getAllPackages:"services/getAllPackages",actCreatePackage:"services/createPackages",actCreateServices:"services/createServices",actGetInfo:"services/getInfoServices",actUpdateServices:"services/updateServices"})),{},{handleSubmitServices:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.service.discountPrice=parseFloat(e.service.discountPrice),e.service.price=parseFloat(e.service.price),e.service.serviceTypeId=e.package_id[0],null!=e.serivce_id){t.next=11;break}return t.next=6,e.actCreateServices(e.service);case 6:a=t.sent,e.handleShowNotification(a),a.isSuccess&&e.redirectService(),t.next=16;break;case 11:return t.next=13,e.actUpdateServices(e.service);case 13:i=t.sent,e.handleShowNotification(i),i.isSuccess&&e.redirectService();case 16:case"end":return t.stop()}}),t)})))()},check_one:function(e){this.package_id=[e.id],this.service.serviceType=e},redirectService:function(){this.$router.push("/services")},getServiceInfo:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.actGetInfo(e.serivce_id);case 2:a=t.sent,a.isSuccess&&(e.service=JSON.parse(JSON.stringify(a.payload.records)),e.package_id=[e.service.serviceTypeId]);case 4:case"end":return t.stop()}}),t)})))()},generateTitleView:l["a"]})},h=b,C=(a("fb99"),Object(m["a"])(h,i,s,!1,null,"6f574376",null));t["default"]=C.exports},fb99:function(e,t,a){"use strict";var i=a("6d90"),s=a.n(i);s.a},fef4:function(e,t,a){}}]);