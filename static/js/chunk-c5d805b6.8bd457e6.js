(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c5d805b6"],{"5df5":function(e,t,n){},7362:function(e,t,n){"use strict";var a=n("8af6"),i=n.n(a);i.a},"8af6":function(e,t,n){},"9a47":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wrapper-select"},[n("a-tree",{attrs:{checkable:"","show-line":!0,"show-icon":!0,"expand-all":!0,"tree-data":e.data,"checked-keys":e.checknode,"expanded-keys":e.defaultExpandedKeys,"replace-fields":{id:"key",title:"label"}},on:{"update:expandedKeys":function(t){e.defaultExpandedKeys=t},"update:expanded-keys":function(t){e.defaultExpandedKeys=t},check:e.handleCheckChange},model:{value:e.checkedKeys,callback:function(t){e.checkedKeys=t},expression:"checkedKeys"}})],1)},i=[],r={name:"SelectCategory",props:{data:{type:Array,default:function(){return[]}},checked:{type:Array,default:function(){return[]}},defaultProps:{children:"children",label:"label"}},data:function(){return{checknode:[],defaultExpandedKeys:[],checkedKeys:[]}},watch:{checked:{handler:function(e){var t=this;setTimeout((function(){t.checknode=e,t.defaultExpandedKeys=e,t.checkedKeys=e}),500)}}},mounted:function(){this.checknode=this.checked},methods:{handleCheckChange:function(){this.$emit("onChange",this.checkedKeys)}}},s=r,o=(n("7362"),n("2877")),c=Object(o["a"])(s,a,i,!1,null,"50d2b0d6",null);t["a"]=c.exports},dd95:function(e,t,n){"use strict";var a=n("5df5"),i=n.n(a);i.a},e1b4:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page-container"},[n("ValidationObserver",{scopedSlots:e._u([{key:"default",fn:function(t){var a=t.handleSubmit;return[n("form",{on:{submit:function(t){return t.preventDefault(),a(e.handleSubmitRole)}}},[n("sticky",{attrs:{"z-index":10}},[n("div",{staticClass:"page-header"},[n("div",{staticClass:"left"},[n("div",{staticClass:"meta-title"},[e._v(e._s(e.formTitle))])]),n("div",{staticClass:"right"},[n("vs-checkbox",{model:{value:e.formCreate.isActive,callback:function(t){e.$set(e.formCreate,"isActive",t)},expression:"formCreate.isActive"}},[e._v(e._s(e.generateTitleView("active","common")))]),n("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[e._v(e._s(e.savebutton))]),n("button",{staticClass:"btn btn-danger",attrs:{type:"reset"},on:{click:function(t){return e.hanldeCancel()}}},[e._v(e._s(e.generateTitleView("cancel","common")))])],1)])]),n("div",{staticClass:"page-content"},[n("div",{staticClass:"inner_content bhs-card"},[n("h4",{staticClass:"heading-create"},[e._v(e._s(e.generateTitleView("infoPer","permission")))]),n("div",{staticClass:"row-wrap"},[n("div",{staticClass:"row-title required-text"},[e._v(e._s(e.generateTitleView("name","permission")))]),n("ValidationProvider",{attrs:{rules:"required",name:e.generateTitleView("name","permission")},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors;return[n("input",{directives:[{name:"model",rawName:"v-model",value:e.formCreate.name,expression:"formCreate.name"}],staticClass:"form-control input",attrs:{"auto-resize":!0,rows:"5"},domProps:{value:e.formCreate.name},on:{input:function(t){t.target.composing||e.$set(e.formCreate,"name",t.target.value)}}}),n("span",{staticClass:"vee-errors"},[e._v(e._s(a[0]))])]}}],null,!0)})],1),n("div",{staticClass:"row-wrap"},[n("div",{staticClass:"row-title required-text"},[e._v(e._s(e.generateTitleView("desc","permission")))]),n("p",{staticClass:"row-description"},[e._v(e._s(e.generateTitleView("shortdesc","permission")))]),n("ValidationProvider",{attrs:{rules:"required",name:e.generateTitleView("desc","permission")},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors;return[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.formCreate.description,expression:"formCreate.description"}],staticClass:"form-control text-area",attrs:{"auto-resize":!0,rows:"5"},domProps:{value:e.formCreate.description},on:{input:function(t){t.target.composing||e.$set(e.formCreate,"description",t.target.value)}}}),e._v(" "),n("span",{staticClass:"vee-errors"},[e._v(e._s(a[0]))])]}}],null,!0)})],1)]),n("div",{staticClass:"inner_info bhs-card"},[n("h4",{staticClass:"heading-create"},[e._v("Thông tin quyền")]),n("div",{staticClass:"row-wrap"},[n("div",{staticClass:"row-title required-text"},[e._v("Module quyền")]),n("select-category",{attrs:{data:e.nodeModule,checked:e.nodedefault},on:{onChange:e.onNodeTree}})],1)])])],1)]}}])})],1)},i=[],r=(n("a4d3"),n("e01a"),n("4de4"),n("4160"),n("b0c0"),n("159b"),n("5530")),s=(n("96cf"),n("1da1")),o=n("2f62"),c=n("9a47"),d=n("e659"),u=n("792d"),l=n("b804"),f=n("79fa"),m=n("ed08"),p=n("b35e"),h={model:"role/",module:"module/"},v={name:"",description:"",isActive:!0,RoleModule:[],RoleListId:[]},b={name:"CreatePermission",components:{SelectCategory:c["a"],Sticky:l["a"]},mixins:[p["a"]],data:function(){return{formCreate:JSON.parse(JSON.stringify(v)),formTitle:null!=this.$router.currentRoute.params.id?"Sửa quyền":"Tạo mới quyền",savebutton:null!=this.$router.currentRoute.params.id?"Cập nhật":"Tạo mới",nodeModule:[],nodedefault:[]}},mounted:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getListModule();case 2:n=e.$router.currentRoute.params.id,"undefined"!==typeof n&&null!=n&&e.roleDetail(n);case 4:case"end":return t.stop()}}),t)})))()},computed:Object(r["a"])({},Object(o["c"])({listModule:h.module+"listModule",totalModules:h.module+"totalModules"})),methods:Object(r["a"])(Object(r["a"])({},Object(o["b"])({actDetailRole:h.model+d["a"],actListModule:h.module+u["a"],actUpdateRole:h.model+"Update",actCreateRole:h.model+"Create"})),{},{handleSubmitRole:function(){null!=this.$router.currentRoute.params.id?this.editRole():this.createRole()},editRole:function(){var e=this;this.showLoading(),this.actUpdateRole(this.formCreate).then((function(t){var n=t.data;e.handleShowNotification(n),e.closeLoading(),e.$router.push("/permission/index")}))},createRole:function(){var e=this;this.showLoading(),this.actCreateRole(this.formCreate).then((function(t){e.handleShowNotification(t),e.closeLoading(),e.$router.push("/permission/index")}))},roleDetail:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.actDetailRole({id:e}).then((function(e){var n=e.data,a=n.payload.records[0],i={id:a.id,name:a.name,description:a.description,isActive:a.isActive,RoleModule:[]};a.roleModule.forEach((function(e){var n={id:e.id,description:e.description,isActive:e.isActive,isDeleted:e.isDeleted,name:e.name},a={id:e.id,description:e.description,isActive:e.isActive,isDeleted:e.isDeleted,name:e.name,ModuleFunction:[]},r=Object(m["b"])(JSON.stringify(n)),s=t.nodeModule.filter((function(e){return e.rootId===n.id}))[0];s.length===e.moduleFunction.length&&t.nodedefault.push(r),e.moduleFunction.forEach((function(n){var i={key:r,id:e.id,name:n.name,data:n};a.ModuleFunction.push(n);var s=Object(m["b"])(JSON.stringify(i));t.nodedefault.push(s)})),i.RoleModule.push(a)})),t.formCreate=JSON.parse(JSON.stringify(i))}));case 2:return a=n.sent,n.abrupt("return",a);case 4:case"end":return n.stop()}}),n)})))()},getListModule:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.actListModule().then((function(t){var n=t.data;n.isSuccess&&n.payload.records.forEach((function(t){var n={id:t.id,description:t.description,isActive:t.isActive,isDeleted:t.isDeleted,name:t.name},a=Object(m["b"])(JSON.stringify(n)),i={id:a,label:t.description,children:[],key:a,rootId:t.id};t.moduleFunction.forEach((function(e){var n={key:a,id:t.id,name:e.name,data:e},r=Object(m["b"])(JSON.stringify(n)),s={id:r,label:e.name,key:r};i.children.push(s)})),e.nodeModule.push(i)}))}));case 2:case"end":return t.stop()}}),t)})))()},onNodeTree:function(e){var t=[];e.forEach((function(e){var n=Object(m["a"])(e),a=JSON.parse(n);if(a&&a.key)if(t&&0===t.length){var i={moduleFunction:[]},r=JSON.parse(Object(m["a"])(a.key));i=Object.assign(r,i),i.moduleFunction.push(a.data),t.push(i)}else{var s=t.filter((function(e){if(e.id===a.id)return e}));if(s&&s.length>0)s[0].moduleFunction.push(a.data);else{var o={moduleFunction:[]},c=JSON.parse(Object(m["a"])(a.key));o=Object.assign(c,o),o.moduleFunction.push(a.data),t.push(o)}}})),this.formCreate.RoleModule=t},hanldeCancel:function(){this.$router.push("/permission/index")},generateTitleView:f["a"]})},C=b,g=(n("dd95"),n("2877")),y=Object(g["a"])(C,a,i,!1,null,"2d22f1d3",null);t["default"]=y.exports}}]);