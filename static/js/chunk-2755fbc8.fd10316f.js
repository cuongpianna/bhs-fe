(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2755fbc8"],{3193:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"content",staticClass:"page-container"},[a("div",{staticClass:"page-content"},[a("div",{staticClass:"inner_content bhs-card"},[a("ValidationObserver",{scopedSlots:e._u([{key:"default",fn:function(t){var r=t.handleSubmit;return[a("form",{on:{submit:function(t){return t.preventDefault(),r(e.handleSubmitCategory)}}},[a("h4",{staticClass:"heading-create"},[e._v(e._s(e.generateTitleView("crtCategory","news.category")))]),a("div",{staticClass:"row-wrap"},[a("div",{staticClass:"row-title required-text"},[e._v(e._s(e.generateTitleView("nameCategory","news.category")))]),a("div",{staticClass:"row-desc desc-create"},[e._v(e._s(e.generateTitleView("desNameCategory","news.category")))]),a("ValidationProvider",{attrs:{rules:"required",name:e.generateTitleView("nameCategory","news.category")},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:e.formCreate.name,expression:"formCreate.name"}],staticClass:"form-control ",attrs:{"auto-resize":!0,rows:"5"},domProps:{value:e.formCreate.name},on:{input:function(t){t.target.composing||e.$set(e.formCreate,"name",t.target.value)}}}),a("span",{staticClass:"vee-errors"},[e._v(e._s(r[0]))])]}}],null,!0)})],1),a("div",{staticClass:"row-wrap"},[a("div",{staticClass:"row-title required-text"},[e._v(e._s(e.generateTitleView("type","news.category")))]),a("div",{staticClass:"row-desc desc-create"},[e._v(e._s(e.generateTitleView("desType","news.category")))]),a("ValidationProvider",{attrs:{rules:"required",name:e.generateTitleView("nameCategory","news.category")},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors;return[a("el-select",{attrs:{clearable:"",placeholder:e.generateTitleView("selectType","news.category")},model:{value:e.formCreate.typeNews,callback:function(t){e.$set(e.formCreate,"typeNews",t)},expression:"formCreate.typeNews"}},e._l(e.listTypeNews,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1),a("span",{staticClass:"vee-errors"},[e._v(e._s(r[0]))])]}}],null,!0)})],1),a("div",{staticClass:"row-wrap"},[a("div",{staticClass:"row-title"},[e._v(e._s(e.generateTitleView("imageCategory","news.category")))]),a("div",{staticClass:"row-desc desc-create"},[e._v(e._s(e.generateTitleView("desImgCategory","news.category")))]),a("b-h-s-avatar",{attrs:{image:e.formCreate.thumbnail},model:{value:e.formCreate.thumbnail,callback:function(t){e.$set(e.formCreate,"thumbnail",t)},expression:"formCreate.thumbnail"}})],1),a("div",{staticClass:"row-wrap"},[a("div",{staticClass:"row-title"},[e._v(e._s(e.generateTitleView("descriptionCategory","news.category")))]),a("div",{staticClass:"row-desc desc-create"},[e._v(e._s(e.generateTitleView("desDescriptionCategory","news.category")))]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.formCreate.description,expression:"formCreate.description"}],staticClass:"form-control text-area ",attrs:{"auto-resize":!0,rows:"5"},domProps:{value:e.formCreate.description},on:{input:function(t){t.target.composing||e.$set(e.formCreate,"description",t.target.value)}}})]),a("div",{staticClass:"button-action"},[a("button",{staticClass:"btn btn-reset",attrs:{type:"reset"}},[e._v(e._s(e.generateTitleView("reset","common")))]),void 0===e.$route.params.id?a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[e._v(e._s(e.generateTitleView("crtCategory","news.category")))]):a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[e._v(e._s(e.generateTitleView("save","common")))])])])]}}])})],1),a("div",{staticClass:"inner_info bhs-card"},[a("div",{staticClass:"heading-create"},[e._v(e._s(e.generateTitleView("listCategory","news.category")))]),a("vs-input",{staticClass:"full-width",attrs:{primary:"",placeholder:e.generateTitleView("searchCategory","search")},scopedSlots:e._u([{key:"icon",fn:function(){return[a("i",{staticClass:"bx bx-search"})]},proxy:!0}]),model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}}),a("el-tree",{ref:"tree",attrs:{data:e.listParent,label:e.listParent.name,children:e.listParent.children,"node-key":"listParent.children","filter-node-method":e.filterNode,"default-expand-all":""},scopedSlots:e._u([{key:"default",fn:function(t){t.node;var r=t.data;return a("span",{staticClass:"custom-tree-node"},[a("span",[e._v(e._s(e.truncate(r.name,10)))]),1!==r.typeNews&&5!==r.typeNews?a("el-dropdown",{attrs:{trigger:"click"}},[a("span",{staticClass:"el-dropdown-link"},[a("font-awesome-icon",{staticClass:"icon",attrs:{icon:"ellipsis-h"}})],1),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[a("div",{on:{click:function(t){return e.selectEditCategory(r.id)}}},[e._v(e._s(e.generateTitleView("editCategory","news.category")))])]),a("el-dropdown-item",[a("div",{on:{click:function(t){return e.showDialogDelete(r)}}},[e._v(e._s(e.generateTitleView("removeCategory","news.category")))])])],1)],1):e._e()],1)}}])})],1),a("vs-dialog",{staticClass:"dialogDelete",attrs:{width:"350px",center:""},scopedSlots:e._u([{key:"header",fn:function(){return[a("h4",{staticClass:"not-margin title-dialog"},[e._v(" "+e._s(e.generateTitleView("infoDialog","common"))+" ")])]},proxy:!0},{key:"footer",fn:function(){return[a("div",{staticClass:"con-footer"},[a("vs-button",{attrs:{type:"submit"},on:{click:function(t){return e.removeCategory()}}},[e._v(" "+e._s(e.generateTitleView("confirm","common"))+" ")]),a("vs-button",{attrs:{type:"reset",dark:"",transparent:""},on:{click:function(t){e.dialogDelete=!1}}},[e._v(" "+e._s(e.generateTitleView("cancel","common"))+" ")])],1)]},proxy:!0}]),model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}},[a("div",{staticClass:"con-content"},[a("p",[e._v(" "+e._s(e.generateTitleView("confirmDelete","common"))),a("span",{staticClass:"title-select"},[e._v(' " '+e._s(e.truncate(e.selectItem.name,10))+' " ')]),e._v(" ? ")])])])],1)])},n=[],s=(a("4de4"),a("c975"),a("b0c0"),a("96cf"),a("1da1")),i=a("5530"),o=a("2f62"),c=a("79fa"),l=a("b35e"),d=a("a896"),u=a("6c9c"),g=a("28ca"),m={name:"NewsCategory",components:{BHSAvatar:d["a"]},mixins:[l["a"]],data:function(){return{mediaFolder:"https://oriwavenet.xyz/agency/Images/Recruitment/",listQuery:{page:1,limit:10},formCreate:{name:"",description:"",thumbnail:"",isActive:!0,isDelete:!1,parentId:null,children:[],typeNews:""},idSelect:this.$route.params.id,activeLoading:!1,dialogDelete:!1,searchQuery:"",selectItem:{},listTypeNews:g["h"]}},computed:Object(i["a"])({},Object(o["c"])({listParent:"news/listCategoryParent",TotalParent:"news/totalParent",listCategory:"news/listCategory",TotalCategory:"news/totalCategory"})),watch:{searchQuery:function(e){this.$refs.tree.filter(e)}},mounted:function(){this.getData()},methods:Object(i["a"])(Object(i["a"])({},Object(o["b"])({actCreateCategory:"news/createCategory",actEditCategory:"news/editCategory",actRemoveCategory:"news/removeCategory",actGetInfoCategory:"news/getInfoCategory",actGetListCategory:"news/getPagingCategory",actGetParentCategory:"news/getParentCategory"})),{},{getData:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.showLoading(),t.next=3,e.actGetListCategory({current_page:e.listQuery.page,limit:e.listQuery.limit,userId:e.userId,name:""});case 3:return t.next=5,e.actGetParentCategory({current_page:e.listQuery.page,limit:e.listQuery.limit,userId:e.userId,name:""});case 5:void 0!==e.idSelect&&e.getInfoCategory(e.idSelect),e.closeLoading();case 7:case"end":return t.stop()}}),t)})))()},handleSubmitCategory:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(void 0!==e.idSelect){t.next=9;break}if(!e.hasPermissionAction(u["a"].CREATE_NEWS,"",e.generateTitleView("noRole","common"))){t.next=7;break}return e.formCreate.userId=e.userId,t.next=5,e.actCreateCategory(e.formCreate);case 5:a=t.sent,e.handleShowNotification(a);case 7:t.next=14;break;case 9:return t.next=11,e.actEditCategory(e.formCreate);case 11:r=t.sent,e.handleShowNotification(r),e.$router.push("/news/category/");case 14:return t.next=16,e.getData();case 16:case"end":return t.stop()}}),t)})))()},selectEditCategory:function(e){this.hasPermissionAction(u["a"].EDIT_NEWS,"news/category/edit/"+e,this.generateTitleView("noRole","common"))},showDialogDelete:function(e){this.hasPermissionAction(u["a"].DELETE_NEWS,"",this.generateTitleView("noRole","common"))&&(this.dialogDelete=!0,this.selectItem=e)},getInfoCategory:function(e){var t=this;this.actGetInfoCategory(e).then((function(e){t.formCreate=e.payload.records}))},removeCategory:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.actRemoveCategory(e.selectItem.id);case 2:if(a=t.sent,a.isSuccess){t.next=7;break}e.handleShowNotification(a),t.next=12;break;case 7:return e.handleShowNotification(a),e.dialogDelete=!1,e.$router.push("/news/category/"),t.next=12,e.getData();case 12:case"end":return t.stop()}}),t)})))()},filterParent:function(){var e=this;return this.listParent.filter((function(t){return t.id!==e.idSelect&&0===e.formCreate.children.length}))},filterNode:function(e,t){return!e||-1!==t.name.indexOf(e)},showLoading:function(){this.componentLoading=this.$vs.loading({type:"scale",target:this.$refs.content})},closeLoading:function(){this.componentLoading.close()},generateTitleView:c["a"]})},f=m,w=(a("f7a1"),a("2877")),y=Object(w["a"])(f,r,n,!1,null,"701dc32a",null);t["default"]=y.exports},f3ed:function(e,t,a){},f7a1:function(e,t,a){"use strict";var r=a("f3ed"),n=a.n(r);n.a}}]);